-- [[ –º–µ–Ω—è–π —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ]]
getgenv().Optimization = {
    state = true, -- –≤–∫–ª/–≤—ã–∫–ª
    hide_screen = true, -- –≤—ã–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ—Ä–∏—Å–æ–≤–∫—É –≥—Ä–∞—Ñ–∏–∫–∏, –±—É—Å—Ç–∏—Ç –∂–µ—Å—Ç–æ—á–∞–π—à–µ —Ñ–ø—Å (–≤–∫–ª/–≤—ã–∫–ª)
    fps = 10
};

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞
getgenv().ServerHopSettings = {
    min_players = 2, -- –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞
    max_players = 10, -- –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –≤ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ (–∏–∑ 50)
    history_timeout = 3600, -- –£–í–ï–õ–ò–ß–ï–ù–û: 1 —á–∞—Å - –≤—Ä–µ–º—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
    messages_sent = false, -- —Ñ–ª–∞–≥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É)
    fast_mode = true -- —Ä–µ–∂–∏–º –±—ã—Å—Ç—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞
};

-- –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞
_G.IS_HOPPING = false

-- –°–æ–∑–¥–∞–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤
if not _G.VISITED_SERVERS then
    _G.VISITED_SERVERS = {}
end

-- –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
local history_file = "server_history.json"
local http_service = game:GetService("HttpService");

-- –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
pcall(function()
    if isfile(history_file) then
        local history_data = readfile(history_file)
        _G.VISITED_SERVERS = http_service:JSONDecode(history_data)
        print("–ó–∞–≥—Ä—É–∂–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤: " .. #_G.VISITED_SERVERS .. " —Å–µ—Ä–≤–µ—Ä–æ–≤")
    else
        print("–§–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π")
        _G.VISITED_SERVERS = {}
    end
end)

-- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä –≤ —Å–ø–∏—Å–æ–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö
_G.VISITED_SERVERS[game.JobId] = os.time()
-- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –≤ —Ñ–∞–π–ª
pcall(function()
    writefile(history_file, http_service:JSONEncode(_G.VISITED_SERVERS))
end)

-- –ó–∞–ø–æ–º–∏–Ω–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä —Ç–∞–∫–∂–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã
_G.CURRENT_SERVER = game.JobId
print("–¢–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä: " .. _G.CURRENT_SERVER .. " –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫")

if getgenv().Optimization.state then
    if setfpscap ~= nil then setfpscap(getgenv().Optimization.fps); end
    UserSettings().GameSettings.MasterVolume = 0;
    settings().Rendering.QualityLevel = "Level01";
    game:GetService("RunService"):Set3dRenderingEnabled(not getgenv().Optimization.hide_screen);
end

local players = game:GetService("Players");
local local_player = players.LocalPlayer;

-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –¥–æ–±–∞–≤–ª—è—é –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ nil
local rifts
local function getRifts()
    local rendered = workspace:FindFirstChild("Rendered")
    if rendered then
        rifts = rendered:FindFirstChild("Rifts")
    end
    return rifts ~= nil
end

-- –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ —Ä–∏—Ñ—Ç—ã —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
repeat
    task.wait(2) -- –û–∂–∏–¥–∞–Ω–∏–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    print("Waiting for Rifts to load...")
until getRifts()

-- –°–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤
local cache_file = "rifts_cache.json"
local rifts_cache = {}

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞
local function cleanCache()
    local current_time = os.time()
    local new_cache = {}
    local removed_count = 0
    
    for rift_id, timestamp in pairs(rifts_cache) do
        if current_time - timestamp < 540 then -- 9 –º–∏–Ω—É—Ç (540 —Å–µ–∫—É–Ω–¥)
            new_cache[rift_id] = timestamp
        else
            removed_count = removed_count + 1
        end
    end
    
    rifts_cache = new_cache
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫—ç—à
    pcall(function()
        writefile(cache_file, http_service:JSONEncode(rifts_cache))
    end)
    
    print("Cache cleaned: Removed", removed_count, "items")
end

-- –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—ç—à, –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if pcall(function() readfile(cache_file) end) then
    pcall(function()
        rifts_cache = http_service:JSONDecode(readfile(cache_file))
    end)
    cleanCache() -- –û—á–∏—â–∞–µ–º –∫—ç—à –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
end

local whitelisted_eggs = { -- —Ç–µ–ø–µ—Ä—å —Ç—É—Ç –º–µ–Ω—è–µ—à—å –≤–µ–±—Ö—É–∫–∏ –ù–ê –ö–ê–ñ–î–û–ï –Ø–ô–¶–û/–°–£–ù–î–£–ö, –≤ luck —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –≤ –∫–∞–≤—ã—á–∫–∞—Ö –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ—à—å –º–Ω–æ–∂–∏—Ç–µ–ª—å —É–¥–∞—á–∏
    ["rainbow-egg"] = {
        webhook = "https://discord.com/api/webhooks/1372211950334906499/_fEmj8oGQ8x4v2kUYeweBlpGdoaCoJ6tIs59BfsBUBeApzBax76neHeWmYbxZyDAXU5f",
        role_id = "", -- ID —Ä–æ–ª–∏ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞
        luck = { "x25" },
        name = "Rainbow Egg",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529484674240593/latest.png",
        color = 3447003 -- –°–∏–Ω–∏–π —Ü–≤–µ—Ç
    },
    ["nightmare-egg"] = {
        webhook = "https://discord.com/api/webhooks/1372212037693866014/agJ1yjXiLDXZAuiJISTd4kr3cCuCRsXuxRVmx42YqrIXJ9qpUSe7wpM9U3-MTYblwQsk",
        role_id = "",
        luck = { "x25" },
        name = "Nightmare Egg",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529530258063370/latest.png",
        color = 10027008 -- –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π —Ü–≤–µ—Ç
    },
    ["void-egg"] = {
        webhook = "https://discord.com/api/webhooks/1372211864133701642/nn8YJOJs5BleUhifO-hA0UNI3nIqnzBlHrhFSTOiibxQBGBjjvMTL8bY9jTciCbjUlNL",
        role_id = "",
        luck = { "x25" },
        name = "Void Egg",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529558158573609/latest.png",
        color = 3355443 -- –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç
    },
    ["royal-chest"] = {
        webhook = "https://discord.com/api/webhooks/1372212119629463753/oVq84wDoSWkyoraVjkYsdsxTBRx1bL3Ui1vUv8eAN7FJNb0Fil27LCOEF5BUT-ZP4Fx_",
        role_id = "1371539682713796648",
        name = "Royal Chest",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372530324445073439/latest.png",
        color = 15277667 -- –†–æ–∑–æ–≤—ã–π —Ü–≤–µ—Ç
    },
    ["bubble-rift"] = {
        webhook = "https://discord.com/api/webhooks/1372211352357179432/7E34K-TjOiIBvKwze6XcknyeMZr73rN77eGJ1iinqCs6noRMvmNIwm3rGH4_OemmtSah",
        role_id = "",
        name = "Bubble Rift",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372535605103427698/latest.png", -- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ç–∫–∞
        color = 3447003 -- –ì–æ–ª—É–±–æ–π —Ü–≤–µ—Ç
    },
    ["mining-egg"] = {
        webhook = "https://discord.com/api/webhooks/1372211772303609896/PinWw2B_ppgV8JsspqCsfFEx8kbK1ozGZEywUFaO5KjTndjm3FvpE_l6V2XO3_XH_amI",
        role_id = "",
        luck = { "x25" },
        name = "Mining Egg",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529638022320148/latest.png",
        color = 7506394 -- –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π —Ü–≤–µ—Ç
    },
    ["cyber-egg"] = {
        webhook = "https://discord.com/api/webhooks/1372211676283273336/Xxiew3FwtHoGld268v6yI46y0AlS9rVlKbjDIIPWLAugNRCO-aN_G7MkXd0z9auQksud",
        role_id = "1371540351361482802",
        luck = { "x25" },
        name = "Cyber Egg",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529595622096977/latest.png",
        color = 16777215 -- –ë–µ–ª—ã–π —Ü–≤–µ—Ç
    },
    ["dice-rift"] = {
        webhook = "https://discord.com/api/webhooks/1372211539167281244/CcP3FgYKV-sZAMmtrtu4z5J5wJJ-SCGUAfavJSvyOc-L4uciHxvIiVmsnCMnpUabrb2s",
        role_id = "1371539732022169601",
        name = "Dice Rift",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372530256669315123/latest.png",
        color = 1 -- –ß–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç
    },
    ["underworld-1"] = {
        webhook = "https://discord.com/api/webhooks/1372273163680874496/vyXpeJcgm6yJFpnIpv9Un-Pt4WOnS8zAmKXk7KuqkCCri8AElQ2LTjx3vZH912KKM7iQ",
        role_id = "1371510979116007545",
        luck = { "x25" },
        name = "Underworld 1",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529424385179789/latest.png",
        color = 16711680 -- –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
    },
    ["underworld-2"] = {
        webhook = "https://discord.com/api/webhooks/1372273163680874496/vyXpeJcgm6yJFpnIpv9Un-Pt4WOnS8zAmKXk7KuqkCCri8AElQ2LTjx3vZH912KKM7iQ",
        role_id = "1371510979116007545",
        luck = { "x25" },
        name = "Underworld 2",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529424385179789/latest.png",
        color = 16711680 -- –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
    },
    ["underworld-3"] = {
        webhook = "https://discord.com/api/webhooks/1372273163680874496/vyXpeJcgm6yJFpnIpv9Un-Pt4WOnS8zAmKXk7KuqkCCri8AElQ2LTjx3vZH912KKM7iQ",
        role_id = "1371510979116007545",
        luck = { "x25" },
        name = "Underworld 3",
        image = "https://cdn.discordapp.com/attachments/811315406299725904/1372529424385179789/latest.png",
        color = 16711680 -- –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
    }
};

-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 2 - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
local required_messages = {
    "Underworld Egg is found! ƒ£ƒ£/ astral-market üî•",
    "Best Pet Shop = ƒ£ƒ£/ astral-market üî•"
};

-- –ò–ó–ú–ï–ù–ï–ù–û: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
local join_link = string.format('https://www.roblox.com/games/start?placeId=16302670534&launchData=%d/%s', game.PlaceId, game.JobId);

local parse_time = function(text)
    text = string.lower(string.gsub(text, "^%s*(.-)%s*$", "%1"));
    local number, unit = string.match(text, "(%d+)%s*(%a+)");
    if number == nil or unit == nil then 
        return 0;
    end
    
    number = tonumber(number);
    
    if string.find(unit, "second") then
        return number;
    elseif string.find(unit, "minute") then
        return number * 60;
    elseif string.find(unit, "hour") then
        return number * 3600;
    else
        return 0;
    end
end

local time_to_discorddate = function(time_)
    return string.format("<t:%d:R>", time_);
end

local request = (syn ~= nil and syn.request) or (http ~= nil and http.request) or (fluxus ~= nil and fluxus.request) or http_request or request;
-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è notify –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø–∏–Ω–≥–æ–≤
local notify = function(webhook, data)
    local response = request({
        Url = webhook, 
        Body = http_service:JSONEncode(data), 
        Method = "POST", 
        Headers = { ['content-type'] = "application/json" }
    });
    print("Discord webhook response:", response.StatusCode, response.StatusMessage);
    return response;
end

-- –ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–†–ê–ë–û–¢–ê–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –°–ï–†–í–ï–†–•–û–ü–ê –î–õ–Ø –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û–ì–û –ü–ï–†–ï–•–û–î–ê –ù–ê –ù–û–í–´–ï –°–ï–†–í–ï–†–ê
local function serverhop()
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ —É–∂–µ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø
    if _G.IS_HOPPING then
        print("–°–µ—Ä–≤–µ—Ä—Ö–æ–ø —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º...")
        return
    end
    
    -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞
    _G.IS_HOPPING = true
    
    print("‚ö†Ô∏è –í–´–ü–û–õ–ù–Ø–ï–¢–°–Ø –°–ï–†–í–ï–†–•–û–ü ‚ö†Ô∏è " .. os.date("%H:%M:%S"))
    print("–¢–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä: " .. game.JobId)
    
    -- –ù–û–í–´–ô –ö–û–î: –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫
    _G.VISITED_SERVERS[game.JobId] = os.time()
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ —Ñ–∞–π–ª
    pcall(function()
        writefile(history_file, http_service:JSONEncode(_G.VISITED_SERVERS))
    end)
    
    -- –°–æ–∑–¥–∞–µ–º –∂–µ—Å—Ç–∫–∏–π —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞
    local blacklist = {[game.JobId] = true}
    if _G.CURRENT_SERVER then 
        blacklist[_G.CURRENT_SERVER] = true 
    end
    if _G.LAST_SERVER then 
        blacklist[_G.LAST_SERVER] = true 
    end
    
    -- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ (—Å—Ç–∞—Ä—à–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–∞–π–º–∞—É—Ç–∞)
    local current_time = os.time()
    local cleaned_count = 0
    for server_id, timestamp in pairs(_G.VISITED_SERVERS) do
        -- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
        if server_id ~= game.JobId and server_id ~= _G.CURRENT_SERVER and current_time - timestamp > getgenv().ServerHopSettings.history_timeout then
            _G.VISITED_SERVERS[server_id] = nil
            cleaned_count = cleaned_count + 1
        end
    end
    
    if cleaned_count > 0 then
        print("–û—á–∏—â–µ–Ω–æ " .. cleaned_count .. " —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏")
        -- –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
        pcall(function()
            writefile(history_file, http_service:JSONEncode(_G.VISITED_SERVERS))
        end)
    end
    
    -- –ù–û–í–´–ô –ö–û–î: –ü–æ–ª—É—á–∞–µ–º —Å–µ—Ä–≤–µ—Ä—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞–º–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏
    local all_servers = {}
    local sort_methods = {"Asc", "Desc", "Random"} -- –†–∞–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
    
    -- –°—á–µ—Ç—á–∏–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö
    local servers_found = 0
    local servers_checked = 0
    
    for _, sort_order in ipairs(sort_methods) do
        -- –ï—Å–ª–∏ —É–∂–µ –Ω–∞—à–ª–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–≤, –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –ø–æ–∏—Å–∫
        if servers_found >= 50 then
            break
        end
        
        local cursor = ""
        local pages = 0
        
        -- –ü–æ–ª—É—á–∞–µ–º –¥–æ 2 —Å—Ç—Ä–∞–Ω–∏—Ü —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
        repeat
            local success, result
            local api_url = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=" .. sort_order .. "&limit=100"
            if cursor ~= "" then
                api_url = api_url .. "&cursor=" .. cursor
            end
            
            success, result = pcall(function()
                return http_service:JSONDecode(game:HttpGet(api_url))
            end)
            
            if success and result and result.data then
                for _, server in ipairs(result.data) do
                    servers_checked = servers_checked + 1
                    
                    -- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: –ù–µ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä –∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ —á–µ—Ä–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
                    local server_id = server.id
                    if not blacklist[server_id] and server_id ~= game.JobId and server.maxPlayers > server.playing then
                        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª –ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–µ—â–µ–Ω —Ä–∞–Ω–µ–µ
                        if not _G.VISITED_SERVERS[server_id] then
                            table.insert(all_servers, {
                                id = server_id,
                                players = server.playing,
                                maxPlayers = server.maxPlayers,
                                method = sort_order -- –ó–∞–ø–æ–º–∏–Ω–∞–µ–º, –∫–∞–∫–∏–º –º–µ—Ç–æ–¥–æ–º –±—ã–ª –ø–æ–ª—É—á–µ–Ω —Å–µ—Ä–≤–µ—Ä
                            })
                            
                            -- –î–æ–±–∞–≤–ª—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫, —á—Ç–æ–±—ã –Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
                            blacklist[server_id] = true
                            servers_found = servers_found + 1
                        end
                    end
                end
                
                -- –û–±–Ω–æ–≤–ª—è–µ–º –∫—É—Ä—Å–æ—Ä –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                cursor = result.nextPageCursor or ""
            else
                cursor = ""
            end
            
            pages = pages + 1
        until cursor == "" or pages >= 2 or servers_found >= 50
    end
    
    print("–ù–∞–π–¥–µ–Ω–æ —Å–µ—Ä–≤–µ—Ä–æ–≤: " .. servers_found .. " –∏–∑ " .. servers_checked .. " –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö")
    
    -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –Ω–∏–∫–∞–∫–∏—Ö –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–Ω–¥–æ–º–∞
    if #all_servers == 0 then
        print("‚ö†Ô∏è –ù–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞! –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–µ—Ä–≤–µ—Ä!")
        
        local success, result = pcall(function()
            -- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–µ—Ä–≤–µ—Ä—ã —Å –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
            return http_service:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"))
        end)
        
        if success and result and result.data then
            for _, server in ipairs(result.data) do
                local server_id = server.id
                -- –ò—Å–∫–ª—é—á–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é
                if server_id ~= game.JobId and server.maxPlayers > server.playing then
                    table.insert(all_servers, {
                        id = server_id,
                        players = server.playing,
                        maxPlayers = server.maxPlayers,
                        emergency = true -- –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
                    })
                end
            end
        end
    end
    
    -- –ù–û–í–´–ô –ö–û–î: –µ—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤, –ø–æ–ª—É—á–∞–µ–º –ª—é–±—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ, –≤–∫–ª—é—á–∞—è –Ω–µ–¥–∞–≤–Ω–æ –ø–æ—Å–µ—â–µ–Ω–Ω—ã–µ
    if #all_servers == 0 then
        print("‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø! –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≤–æ–æ–±—â–µ –Ω–∏–∫–∞–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤! –í—ã–±–∏—Ä–∞–µ–º –ª—é–±–æ–π –¥–æ—Å—Ç—É–ø–Ω—ã–π!")
        
        local success, result = pcall(function()
            return http_service:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?limit=100"))
        end)
        
        if success and result and result.data then
            for _, server in ipairs(result.data) do
                -- –ò—Å–∫–ª—é—á–∞–µ–º –¢–û–õ–¨–ö–û —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä
                if server.id ~= game.JobId then
                    table.insert(all_servers, {
                        id = server.id,
                        players = server.playing,
                        maxPlayers = server.maxPlayers,
                        ultra_emergency = true -- –ö—Ä–∞–π–Ω—è—è –º–µ—Ä–∞
                    })
                end
            end
        end
    end
    
    -- –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç
    if #all_servers == 0 then
        print("‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê! –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–µ—Ä–≤–µ—Ä—ã! –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç!")
        
        -- –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
        local random_delay = math.random(0.5, 2)
        print("–°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: " .. random_delay .. " —Å–µ–∫—É–Ω–¥")
        task.wait(random_delay)
        
        game:GetService("TeleportService"):Teleport(game.PlaceId)
        return
    end
    
    -- –§–∏–ª—å—Ç—Ä—É–µ–º —Å–µ—Ä–≤–µ—Ä—ã —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –∞–≤–∞—Ä–∏–π–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
    local filtered_servers = {}
    for _, server in ipairs(all_servers) do
        -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–ª—è –∞–≤–∞—Ä–∏–π–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
        if server.emergency or server.ultra_emergency then
            table.insert(filtered_servers, server)
        -- –û–±—ã—á–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏–≥—Ä–æ–∫–æ–≤
        elseif server.players >= getgenv().ServerHopSettings.min_players and 
               server.players <= getgenv().ServerHopSettings.max_players then
            table.insert(filtered_servers, server)
        end
    end
    
    -- –ï—Å–ª–∏ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ
    if #filtered_servers == 0 then
        print("–ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ")
        filtered_servers = all_servers
    end
    
    -- –ù–û–í–´–ô –ö–û–î: –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Å–ø–∏—Å–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
    -- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
    local function shuffleTable(t)
        for i = #t, 2, -1 do
            local j = math.random(i)
            t[i], t[j] = t[j], t[i]
        end
    end
    
    shuffleTable(filtered_servers)
    
    -- –ù–û–í–´–ô –ö–û–î: –í—ã–±–∏—Ä–∞–µ–º —Å–µ—Ä–≤–µ—Ä —Å —É—á–µ—Ç–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
    local chosen_server = nil
    
    -- –ï—Å–ª–∏ –µ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –∞–≤–∞—Ä–∏–π–Ω—ã–º–∏ –∏ –Ω–µ –±—ã–ª–∏ —Ä–∞–Ω–µ–µ –ø–æ—Å–µ—â–µ–Ω—ã
    local pristine_servers = {}
    for _, server in ipairs(filtered_servers) do
        if not server.emergency and not server.ultra_emergency and not _G.VISITED_SERVERS[server.id] then
            table.insert(pristine_servers, server)
        end
    end
    
    -- –ï—Å–ª–∏ –Ω–∞—à–ª–∏ "—á–∏—Å—Ç—ã–µ" —Å–µ—Ä–≤–µ—Ä—ã, –≤—ã–±–∏—Ä–∞–µ–º –∏–∑ –Ω–∏—Ö
    if #pristine_servers > 0 then
        chosen_server = pristine_servers[math.random(1, #pristine_servers)]
        print("–í—ã–±—Ä–∞–Ω –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–Ω–µ–µ –Ω–µ –ø–æ—Å–µ—â–∞–ª—Å—è: " .. chosen_server.id)
    -- –ò–Ω–∞—á–µ –≤—ã–±–∏—Ä–∞–µ–º –∏–∑ –≤—Å–µ—Ö –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã—Ö
    else
        chosen_server = filtered_servers[math.random(1, #filtered_servers)]
        print("–í—ã–±—Ä–∞–Ω —Å–µ—Ä–≤–µ—Ä –∏–∑ –æ–±—â–µ–≥–æ —Å–ø–∏—Å–∫–∞: " .. chosen_server.id)
    end
    
    -- –°–¢–û–ü-–ü–†–û–í–ï–†–ö–ê: —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –Ω–µ –≤—ã–±—Ä–∞–ª–∏ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä
    if chosen_server.id == game.JobId or chosen_server.id == _G.CURRENT_SERVER then
        print("‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê! –í—ã–±—Ä–∞–Ω —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä! –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥—Ä—É–≥–æ–≥–æ!")
        
        -- –£–¥–∞–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞
        for i, server in ipairs(filtered_servers) do
            if server.id == game.JobId or server.id == _G.CURRENT_SERVER then
                table.remove(filtered_servers, i)
                break
            end
        end
        
        -- –ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–µ—Ä—ã, –≤—ã–±–∏—Ä–∞–µ–º –∏–∑ –Ω–∏—Ö
        if #filtered_servers > 0 then
            chosen_server = filtered_servers[math.random(1, #filtered_servers)]
            print("–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞–Ω –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä: " .. chosen_server.id)
        else
            print("‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ù–ï–¢ –î–†–£–ì–ò–• –°–ï–†–í–ï–†–û–í! –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤–∞—Ä–∏–π–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç!")
            game:GetService("TeleportService"):Teleport(game.PlaceId)
            return
        end
    end
    
    -- –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ –∏—Å—Ç–æ—Ä–∏—é
    _G.VISITED_SERVERS[chosen_server.id] = os.time()
    _G.LAST_SERVER = chosen_server.id
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –≤ —Ñ–∞–π–ª
    pcall(function()
        writefile(history_file, http_service:JSONEncode(_G.VISITED_SERVERS))
    end)
    
    print("–í—ã–±—Ä–∞–Ω —Å–µ—Ä–≤–µ—Ä: " .. chosen_server.id .. " —Å " .. chosen_server.players .. " –∏–≥—Ä–æ–∫–∞–º–∏")
    
    -- –°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–µ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
    local random_delay = math.random(5, 15) / 10 -- –æ—Ç 0.5 –¥–æ 1.5 —Å–µ–∫—É–Ω–¥
    print("–°–ª—É—á–∞–π–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–µ–π: " .. random_delay .. " —Å–µ–∫—É–Ω–¥")
    task.wait(random_delay)
    
    -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º—Å—è –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    print("‚ñ∂Ô∏è –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä: " .. chosen_server.id)
    
    -- –ü–æ–ø—ã—Ç–∫–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
    local teleport_success = pcall(function()
        game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, chosen_server.id, game.Players.LocalPlayer)
    end)
    
    -- –ï—Å–ª–∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–ø–∞—Å–Ω–æ–π –º–µ—Ç–æ–¥
    if not teleport_success then
        print("‚ö†Ô∏è –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–µ —É–¥–∞–ª–∞—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–ø–∞—Å–Ω–æ–π –º–µ—Ç–æ–¥")
        task.wait(0.5)
        
        -- –ü—Ä–æ–±—É–µ–º –µ—â–µ —Ä–∞–∑ —Å –¥—Ä—É–≥–∏–º –º–µ—Ç–æ–¥–æ–º
        pcall(function()
            game:GetService("TeleportService"):Teleport(game.PlaceId)
        end)
    end
    
    -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –Ω–∞ —Å–ª—É—á–∞–π —Å–±–æ—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
    task.spawn(function()
        task.wait(10)
        _G.IS_HOPPING = false
    end)
end

task.spawn(function() -- anti afk
    for _,v in pairs(getconnections(local_player.Idled)) do v:Disable() end
    for _,v in pairs(getconnections(game:GetService("UserInputService").WindowFocused)) do v:Disable() end
    for _,v in pairs(getconnections(game:GetService("UserInputService").WindowFocusReleased)) do v:Disable() end
end)

-- –ü–†–û–í–ï–†–ö–ê –ò –û–¢–ü–†–ê–í–ö–ê –í–ï–ë–•–£–ö–û–í (–ò–°–ü–†–ê–í–õ–ï–ù–û)
-- –í–ê–ñ–ù–û: –í—ã–Ω–µ—Å–µ–Ω–æ –≤ –Ω–∞—á–∞–ª–æ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
local rifts_found = 0 -- —Å—á–µ—Ç—á–∏–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–∏—Ñ—Ç–æ–≤
local rifts_sent = 0  -- —Å—á–µ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤–µ–±—Ö—É–∫–æ–≤

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Ñ—Ç–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤
for _, rift in pairs(rifts:GetChildren()) do
    if not rift:IsA("Model") or not whitelisted_eggs[rift.Name] then
        continue;
    end
    
    rifts_found = rifts_found + 1
    
    local data = whitelisted_eggs[rift.Name];
    local luck = "None";
    local gui
    
    -- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ nil –∏ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
    local display = rift:FindFirstChild("Display")
    if display then
        gui = display:FindFirstChildOfClass("SurfaceGui")
        if data.luck ~= nil then
            if gui == nil then
                repeat 
                    task.wait(0.2)
                    gui = display:FindFirstChildOfClass("SurfaceGui")
                until gui ~= nil or task.wait(2) -- —Ç–∞–π–º–∞—É—Ç 2 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã
            end
            
            if gui and gui:FindFirstChild("Icon") and gui.Icon:FindFirstChild("Luck") then
                if not table.find(data.luck, gui.Icon.Luck.Text) then
                    continue
                end
                luck = gui.Icon.Luck.Text
            else
                continue -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ –Ω–µ—Ç –Ω—É–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
            end
        end
    else
        continue -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ –Ω–µ—Ç Display
    end
    
    if not gui or not gui:FindFirstChild("Timer") then
        continue -- –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ –Ω–µ—Ç —Ç–∞–π–º–µ—Ä–∞
    end

    -- –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–ª—è —Ä–∏—Ñ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–≥–æ —Ç–∏–ø–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (—Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º)
    local position = rift:GetPivot().Position
    local rift_id = string.format("%s_%d_%d_%d", 
        rift.Name, 
        math.floor(position.X), 
        math.floor(position.Y), 
        math.floor(position.Z))
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ —ç—Ç–æ—Ç —Ä–∏—Ñ—Ç —É–∂–µ –Ω–∞–π–¥–µ–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ
    if rifts_cache[rift_id] then
        print("Rift already reported:", rift_id)
        continue
    end
    
    local time = os.time() + parse_time(gui.Timer.Text);
    local discord_time = time_to_discorddate(time);
    local height = math.floor(rift:GetPivot().Position.Y) - 4;
    
    -- –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤–µ–±—Ö—É–∫–∞
    local message = {
        content = data.role_id and data.role_id ~= "" and ("<@&" .. data.role_id .. ">") or "",
        embeds = {
            {
                title = data.name .. " has been found!",
                description = "**[üîó Click here to join](" .. join_link .. ")**\n\nü™ÑTutorial how to join pinned in https://discord.com/channels/1279491047616938005/1369315912049492069",
                fields = {
                    {
                        name = "‚è≤ Expires in",
                        value = discord_time,
                        inline = true
                    },
                    {
                        name = "üìè Height",
                        value = tostring(height),
                        inline = true
                    },
                    {
                        name = "üë§ Players",
                        value = tostring(#players:GetPlayers()),
                        inline = true
                    },
                    {
                        name = "üçÄ Luck",
                        value = luck
                    }
                },
                color = data.color or 4508791, -- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–≤–µ—Ç –¥–ª—è —Ä–∏—Ñ—Ç–∞ –∏–ª–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π
                thumbnail = {
                    url = data.image
                },
                footer = {
                    text = "gg/astral-market ‚Ä¢ " .. os.date("%H:%M", os.time())
                }
            }
        }
    }

    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–∏—Ñ—Ç –≤ –∫—ç—à–µ —Å —Ç–µ–∫—É—â–∏–º –≤—Ä–µ–º–µ–Ω–µ–º
    rifts_cache[rift_id] = os.time()
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫—ç—à
    pcall(function()
        writefile(cache_file, http_service:JSONEncode(rifts_cache))
    end)
    
    -- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–µ–±—Ö—É–∫
    print("–û—Ç–ø—Ä–∞–≤–∫–∞ –≤–µ–±—Ö—É–∫–∞ –¥–ª—è: " .. data.name .. " (ID: " .. rift_id .. ")")
    notify(data.webhook, message);
    rifts_sent = rifts_sent + 1
    
    -- –£–º–µ–Ω—å—à–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏ –≤–µ–±—Ö—É–∫–æ–≤
    task.wait(0.3)
end

print("Rifts found:", rifts_found, "Webhooks sent:", rifts_sent)

-- –£–°–ö–û–†–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –û–¢–ü–†–ê–í–ö–ò –°–û–û–ë–©–ï–ù–ò–ô (–¢–û–õ–¨–ö–û –ü–ï–†–í–´–ï 2)
task.spawn(function()
    -- –£–º–µ–Ω—å—à–∞–µ–º –æ–∂–∏–¥–∞–Ω–∏–µ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã
    task.wait(1)
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –ª–∏ –º—ã —É–∂–µ —Å–æ–æ–±—â–µ–Ω–∏—è
    if getgenv().ServerHopSettings.messages_sent then
        print("–°–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —Ä–∞–Ω–µ–µ")
        return
    end
    
    local channel
    local success = pcall(function()
        channel = game:GetService("TextChatService"):WaitForChild("TextChannels"):WaitForChild("RBXGeneral", 3)
    end)
    
    if not success or not channel then
        print("Failed to get chat channel, trying alternative method")
        -- –ü—Ä–æ–±—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        pcall(function()
            local ChatEvents = game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents")
            if ChatEvents then
                local SayMessageRequest = ChatEvents:FindFirstChild("SayMessageRequest")
                if SayMessageRequest then
                    channel = {
                        SendAsync = function(_, message)
                            SayMessageRequest:FireServer(message, "All")
                            return true
                        end
                    }
                    success = true
                    print("–ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ —á–∞—Ç–∞")
                end
            end
        end)
    end
    
    if not success or not channel then
        print("–ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É —á–∞—Ç–∞, –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∏–º –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π")
        serverhop()
        return
    end
    
    print("–ë—ã—Å—Ç—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ 2 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π...")
    local messages_sent = 0
    
    -- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¢–û–õ–¨–ö–û –¥–≤–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è —Å –£–ú–ï–ù–¨–®–ï–ù–ù–´–ú –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 1 —Å–µ–∫—É–Ω–¥—É
    for i, message in ipairs(required_messages) do
        local sent = pcall(function()
            channel:SendAsync(message)
        end)
        
        if sent then
            messages_sent = messages_sent + 1
            print("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ " .. i .. ": " .. message)
        else
            print("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ: " .. message)
        end
        
        -- –£–º–µ–Ω—å—à–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –¥–æ 1 —Å–µ–∫—É–Ω–¥—ã
        task.wait(0.5) -- –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –±–æ–ª—å—à–µ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
    end
    
    print("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤—Å–µ–≥–æ " .. messages_sent .. " —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ 2 –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö")
    
    -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
    getgenv().ServerHopSettings.messages_sent = true
    
    -- –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø –°–†–ê–ó–£ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
    print("–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π...")
    task.wait(0.5) -- –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
    serverhop()
end)

-- –ë–´–°–¢–†–´–ô —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥, –µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω
task.spawn(function()
    task.wait(5) -- –£–º–µ–Ω—å—à–µ–Ω–æ —Å 7 –¥–æ 5 —Å–µ–∫—É–Ω–¥
    print("–†–µ–∑–µ—Ä–≤–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥...")
    serverhop()
end)

-- –†–ï–ó–ï–†–í–ù–´–ô –°–ï–†–í–ï–†–•–û–ü —Å–ø—É—Å—Ç—è 8 —Å–µ–∫—É–Ω–¥ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
task.spawn(function()
    task.wait(8) -- –£–º–µ–Ω—å—à–µ–Ω–æ —Å 10 –¥–æ 8 —Å–µ–∫—É–Ω–¥
    print("–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥...")
    
    -- –ù–û–í–´–ô –ö–û–î: –ü—Ä—è–º–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
    pcall(function()
        local success, result = pcall(function()
            return http_service:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?limit=100"))
        end)
        
        if success and result and result.data then
            -- –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä—ã, –æ—Ç–ª–∏—á–Ω—ã–µ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ
            local valid_servers = {}
            for _, server in ipairs(result.data) do
                if server.id ~= game.JobId and server.id ~= _G.CURRENT_SERVER and server.maxPlayers > server.playing then
                    table.insert(valid_servers, server)
                end
            end
            
            -- –ï—Å–ª–∏ –Ω–∞—à–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å–µ—Ä–≤–µ—Ä—ã, –≤—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π
            if #valid_servers > 0 then
                local chosen = valid_servers[math.random(1, #valid_servers)]
                print("–≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä: " .. chosen.id)
                game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, chosen.id, game.Players.LocalPlayer)
                return
            end
        end
        
        -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç
        print("–ù–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç")
        game:GetService("TeleportService"):Teleport(game.PlaceId)
    end)
end)

-- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∏–∫–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
game:GetService("CoreGui"):FindFirstChild("RobloxPromptGui"):FindFirstChild("promptOverlay").ChildAdded:Connect(function(child) -- –ø—Ä–∏ –∫–∏–∫–µ –∏–≥—Ä–æ–π
    if child.Name == "ErrorPrompt" then
        print("Game kick detected, starting server hop")
        serverhop();
    end
end)

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –Ω–∞ —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä
game:GetService("Players").LocalPlayer.OnTeleport:Connect(function(state)
    if state == Enum.TeleportState.Started then
        print("–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–∞—á–∞—Ç–∞...")
        -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –Ω–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –Ω–µ–≥–æ
        _G.DEPARTING_SERVER = game.JobId
        pcall(function()
            writefile("last_server.txt", game.JobId)
        end)
    elseif state == Enum.TeleportState.Failed then
        print("–¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –ø—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞...")
        task.wait(1) -- –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
        serverhop()
    end
end)

-- –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –ü–†–ï–î–û–¢–í–†–ê–©–ï–ù–ò–Ø –ü–ï–†–ï–ó–ê–•–û–î–ê –ù–ê –¢–û–¢ –ñ–ï –°–ï–†–í–ï–†
task.spawn(function()
    task.wait(3) -- –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    
    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º
    if pcall(function() readfile("last_server.txt") end) then
        local last_server = readfile("last_server.txt")
        if last_server == game.JobId then
            print("‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –ü–ï–†–ï–ó–ê–®–õ–ò –ù–ê –¢–û–¢ –ñ–ï –°–ï–†–í–ï–†!")
            
            -- –î–æ–±–∞–≤–ª—è–µ–º –≤ —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º
            _G.VISITED_SERVERS[game.JobId] = os.time() + 7200 -- –ë–ª–æ–∫–∏—Ä—É–µ–º –Ω–∞ 2 —á–∞—Å–∞
            pcall(function()
                writefile(history_file, http_service:JSONEncode(_G.VISITED_SERVERS))
            end)
            
            -- –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
            print("–ó–∞–ø—É—Å–∫ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø–∞...")
            _G.EMERGENCY_HOP = true
            task.wait(1)
            serverhop()
        else
            print("‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –Ω–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É")
            -- –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
            pcall(function()
                writefile("last_server.txt", game.JobId)
            end)
        end
    else
        -- –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
        pcall(function()
            writefile("last_server.txt", game.JobId)
        end)
    end
end)

-- –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
print("RiftFinder initialized successfully!")
print("Current server: " .. game.JobId)
print("Server hop system prevents returning to the same server")
print("–ë—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–µ—Ä—Ö–æ–ø —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥")
